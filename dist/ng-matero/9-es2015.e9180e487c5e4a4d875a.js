(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{m5sN:function(e,t,i){"use strict";i.r(t),i.d(t,"DossierModule",function(){return Ye});var a=i("fXoL");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Nb({type:e,selectors:[["app-nouveau"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Zb(0,"p"),a.Sc(1,"nouveau works!"),a.Yb())},styles:[""]}),e})();var n=i("tyNb"),r=i("G6MR"),s=i("2zjr"),l=i("+0xr"),c=i("UJml"),d=i("M9IT"),b=i("Dh3D"),m=i("P8pP"),u=i("3Pt+"),p=i("0IaG"),h=i("tk/3"),f=i("Wp6s"),g=i("kmnG"),Z=i("qFsG"),Y=i("d3UM"),S=i("FKr1"),v=i("XiUz"),x=i("ofXK"),C=i("bTqV"),D=i("NFeN"),_=i("WCHk");const y=["UploadFileInput"];function U(e,t){if(1&e&&(a.Zb(0,"mat-option",39),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.email),a.Gb(1),a.Tc(e.email)}}function N(e,t){if(1&e&&(a.Zb(0,"mat-option",39),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.nif),a.Gb(1),a.Vc("",e.nom," NIF: ",e.nif,"")}}let w=(()=>{class e{constructor(e,t,i,a,o,n,r){this.fb=e,this.dossierService=t,this.userService=i,this.dialogRef=a,this.clientService=o,this.http=n,this.notif=r,this.piece="Selectionner fichier",this.dataLoading=!0,this.datePremier=Date,this.doFilter=e=>{this.dataSource.filter=e.trim().toLocaleLowerCase()}}ngOnInit(){this.dossierFormAddNew=this.fb.group({nom_cocontractant:[""],lieu_execution:[""],montant:[""],date_signature:[""],duree:[""],date_fin:[""],type:[""],sous_typologie:[""],reference:[""],piece_jointe:[""],date_alerte:[""],emails:[""],client:[""],search:[""],intitule:[""],objetEmail:[""],dateNotification:[""],datePremierNotif:[""],dateSecondNotif:[""],etatNotif:[""]}),this.listUsers(),this.listClient()}ajouterDossier(){var e=new FormData,t=new Date(this.dateAlerte);e.append("nom_cocontractant",this.dossierFormAddNew.get("nom_cocontractant").value),e.append("lieu_execution",this.dossierFormAddNew.get("lieu_execution").value),e.append("montant",this.dossierFormAddNew.get("montant").value),e.append("date_signature",this.dossierFormAddNew.get("date_signature").value),e.append("duree",this.dossierFormAddNew.get("duree").value),e.append("date_fin",this.dossierFormAddNew.get("date_fin").value),e.append("type",this.dossierFormAddNew.get("type").value),e.append("sous_typologie",this.dossierFormAddNew.get("sous_typologie").value),e.append("reference",this.dossierFormAddNew.get("reference").value),e.append("piece_jointe",this.file),e.append("date_alerte",this.dossierFormAddNew.get("date_alerte").value),e.append("emails",this.dossierFormAddNew.get("emails").value),e.append("client",this.dossierFormAddNew.get("client").value),e.append("intitule",this.dossierFormAddNew.get("intitule").value),e.append("objetEmail",this.dossierFormAddNew.get("objetEmail").value),e.append("dateNotification",this.dossierFormAddNew.get("dateNotification").value),e.append("datePremierNotif",new Date(t.setDate(t.getDate()-30)).toISOString().slice(0,10)),e.append("dateSecondNotif",new Date(t.setDate(t.getDate()-15)).toISOString().slice(0,10)),e.append("etatNotif",this.dossierFormAddNew.get("etatNotif").value),this.http.post("http://localhost:8197/api/dossier/add",e).subscribe(e=>this.notif.showSuccess("Contrat ajoute avec succes !!"),e=>console.log(e)),this.loadDossiers(),this.dialogRef.close()}loadDossiers(){this.dossierService.listerDossier().subscribe(e=>this.handlerDocuments(e),e=>this.handlerDossierError(e))}handlerDocuments(e){console.log(e),this.dataLoading=!1,this.dataSourceDossier=new l.o(e),this.dataSourceDossier.paginator=this.paginator,this.dataSourceDossier.sort=this.sort}handlerDossierError(e){console.error(e)}onClose(){this.dosAddNew.reset(),this.dialogRef.close()}listUsers(){this.userService.userListe().subscribe(e=>{this.userList=e,console.log(this.userList)})}listClient(){this.clientService.clientListe().subscribe(e=>{this.clientList=e,console.log(this.clientList)})}fileChangeEvent(e){this.piece=e.target.files[0],this.piece="",Array.from(e.target.files).forEach(e=>{console.log(e),this.piece+=e.name}),this.uploadFileInput.nativeElement.value=""}onFileSelected(e){const t=e.target.files[0];t&&(this.piece=t.name),this.file=e.target.files[0],console.log(t.name)}valueChangeEvent(){var e=new Date(this.date_sign),t=new Date(this.date_fin).getTime()-e.getTime();this.duree=t/864e5;var i=new Date(this.dateAlerte);console.log("Date d'alerte:::::::::::::::::::::::::",i.toLocaleString()),i.setDate(i.getDate()-30),console.log("Date Premier(30 jours avast)::::::::::",i.toLocaleString()),console.log("Date d'alerte:::::::::::::::::::::::::",i.toLocaleString()),i.setDate(i.getDate()-15),console.log("Date Premier(15 jours avast)::::::::::",i.toLocaleString())}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(u.f),a.Tb(r.a),a.Tb(c.a),a.Tb(p.h),a.Tb(s.a),a.Tb(h.c),a.Tb(m.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-add"]],viewQuery:function(e,t){if(1&e&&(a.Wc(y,1),a.Wc(d.a,3),a.Wc(b.a,3)),2&e){let e;a.Dc(e=a.ic())&&(t.uploadFileInput=e.first),a.Dc(e=a.ic())&&(t.paginator=e.first),a.Dc(e=a.ic())&&(t.sort=e.first)}},decls:108,vars:16,consts:[[1,"per-form",3,"formGroup"],["appearance","fill",1,"width-75",2,"margin-left","5px","width","32%"],["formControlName","nom_cocontractant","matInput","","placeholder","Entrer le nom du contrat","maxlength","50","name","nom_cocontractant"],["formControlName","lieu_execution","matInput","","placeholder","Entrer le lieu d'execution du contrat","maxlength","50","name","lieu_execution"],["formControlName","montant","matInput","","placeholder","Entrer le montant du contrat","maxlength","50","name","montant"],["type","date","mask","","formControlName","date_signature","matInput","","placeholder","Entrer le data_signature","maxlength","50","name","date_signature",3,"ngModel","ngModelChange"],["type","date","mask","","formControlName","date_fin","matInput","","placeholder","Entrer le date_fin_contrat","maxlength","50","name","date_fin",3,"ngModel","ngModelChange","change"],["type","text","id","duree","mask","","formControlName","duree","matInput","","placeholder","Entrer le duree_contrat","maxlength","50","name","duree",3,"ngModel","ngModelChange"],["appearance","fill",1,"no-label-field",2,"margin-left","5px","width","32%"],["formControlName","type","panelClass","my-select-panel-class"],["value","Achat"],["value","Bail"],["value","Prestation de service"],["formControlName","sous_typologie","panelClass","my-select-panel-class"],["value","Mobilier"],["value","Immobilier"],["value","Sites"],["value","Accueils commerciaux"],["value","R\xe8sidentiel"],["value","Ev\xe8nementiels/Sponsoring"],["value","Municipalite"],["value","Partenaires sous-traitants"],["formControlName","reference","matInput","","placeholder","Entrer reference_contrat","maxlength","50","name","reference"],["type","date","formControlName","dateNotification","matInput","","placeholder","Entrer le date notification","maxlength","50","name","dateNotification","required",""],["type","date","mask","","formControlName","date_alerte","matInput","","placeholder","Entrer le date_alerte","maxlength","50","name","date_alerte",3,"ngModel","ngModelChange"],["formControlName","emails","multiple","","panelClass","my-select-panel-class","name","emails"],["fxLayout","","fxLayoutAlign","center center"],["fxFlex","50%"],["type","search","formControlName","search","placeholder","Rechercher","matInput","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",1,"no-label-field",2,"margin-left","5px","width","46%"],["formControlName","client","panelClass","my-select-panel-class"],["type","search","formControlName","search","placeholder","Entrer le NIF du client","matInput","",3,"ngModel","ngModelChange"],["type","file","formControlName","piece_jointe",1,"file-input",3,"change"],["fileUpload",""],[1,"file-upload"],["mat-mini-fab","","color","primary",1,"upload-btn",3,"click"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","color","primary",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=a.ac();a.Zb(0,"mat-dialog-content"),a.Zb(1,"mat-card-title"),a.Sc(2,"Ajouter un Contrat"),a.Yb(),a.Zb(3,"form",0),a.Zb(4,"mat-form-field",1),a.Zb(5,"mat-label"),a.Sc(6,"Nom du Cocontractant"),a.Yb(),a.Ub(7,"input",2),a.Yb(),a.Zb(8,"mat-form-field",1),a.Zb(9,"mat-label"),a.Sc(10,"Lieux d'execution"),a.Yb(),a.Ub(11,"input",3),a.Yb(),a.Zb(12,"mat-form-field",1),a.Zb(13,"mat-label"),a.Sc(14,"Montant du contrat"),a.Yb(),a.Ub(15,"input",4),a.Yb(),a.Ub(16,"br"),a.Zb(17,"mat-form-field",1),a.Zb(18,"mat-label"),a.Sc(19,"Date de signature"),a.Yb(),a.Zb(20,"input",5),a.hc("ngModelChange",function(e){return t.date_sign=e}),a.Yb(),a.Yb(),a.Zb(21,"mat-form-field",1),a.Zb(22,"mat-label"),a.Sc(23,"Date de fin du contrat"),a.Yb(),a.Zb(24,"input",6),a.hc("ngModelChange",function(e){return t.date_fin=e})("change",function(){return t.valueChangeEvent()}),a.Yb(),a.Yb(),a.Zb(25,"mat-form-field",1),a.Zb(26,"mat-label"),a.Sc(27,"Duree du contrat (en jours)"),a.Yb(),a.Zb(28,"input",7),a.hc("ngModelChange",function(e){return t.duree=e}),a.Yb(),a.Yb(),a.Ub(29,"br"),a.Zb(30,"mat-form-field",8),a.Zb(31,"mat-label"),a.Sc(32,"Type de contrat"),a.Yb(),a.Zb(33,"mat-select",9),a.Zb(34,"mat-option",10),a.Sc(35,"Achat"),a.Yb(),a.Zb(36,"mat-option",11),a.Sc(37,"Bail"),a.Yb(),a.Zb(38,"mat-option",12),a.Sc(39,"Prestation de Service"),a.Yb(),a.Yb(),a.Yb(),a.Zb(40,"mat-form-field",8),a.Zb(41,"mat-label"),a.Sc(42,"Selectionner le sous type de contrat"),a.Yb(),a.Zb(43,"mat-select",13),a.Zb(44,"mat-option",14),a.Sc(45,"Mobilier"),a.Yb(),a.Zb(46,"mat-option",15),a.Sc(47,"Immobilier"),a.Yb(),a.Zb(48,"mat-option",16),a.Sc(49,"Sites"),a.Yb(),a.Zb(50,"mat-option",17),a.Sc(51,"Accueils commerciaux"),a.Yb(),a.Zb(52,"mat-option",18),a.Sc(53,"R\xe8sidentiel"),a.Yb(),a.Zb(54,"mat-option",19),a.Sc(55,"Ev\xe8nementiels/Sponsoring"),a.Yb(),a.Zb(56,"mat-option",20),a.Sc(57,"Municipalite"),a.Yb(),a.Zb(58,"mat-option",21),a.Sc(59,"Partenaires sous-traitants"),a.Yb(),a.Zb(60,"mat-option",16),a.Sc(61,"Presse"),a.Yb(),a.Yb(),a.Yb(),a.Zb(62,"mat-form-field",1),a.Zb(63,"mat-label"),a.Sc(64,"Reference du contrat"),a.Yb(),a.Ub(65,"input",22),a.Yb(),a.Ub(66,"br"),a.Zb(67,"mat-form-field",1),a.Zb(68,"mat-label"),a.Sc(69,"Date de Reception"),a.Yb(),a.Ub(70,"input",23),a.Yb(),a.Zb(71,"mat-form-field",1),a.Zb(72,"mat-label"),a.Sc(73,"Date d'alerte"),a.Yb(),a.Zb(74,"input",24),a.hc("ngModelChange",function(e){return t.dateAlerte=e}),a.Yb(),a.Yb(),a.Zb(75,"mat-form-field",8),a.Zb(76,"mat-label"),a.Sc(77,"Selectionner les Emails a notifier"),a.Yb(),a.Zb(78,"mat-select",25),a.Zb(79,"div",26),a.Zb(80,"mat-form-field",27),a.Zb(81,"input",28),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Qc(82,U,2,2,"mat-option",29),a.mc(83,"searchFilter"),a.Yb(),a.Yb(),a.Ub(84,"br"),a.Zb(85,"mat-form-field",30),a.Zb(86,"mat-label"),a.Sc(87,"Client"),a.Yb(),a.Zb(88,"mat-select",31),a.Zb(89,"div",26),a.Zb(90,"mat-form-field",27),a.Zb(91,"input",32),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Zb(92,"mat-option"),a.Sc(93,"Select"),a.Yb(),a.Qc(94,N,2,3,"mat-option",29),a.mc(95,"searchFilter"),a.Yb(),a.Yb(),a.Zb(96,"input",33,34),a.hc("change",function(e){return t.onFileSelected(e)}),a.Yb(),a.Zb(98,"div",35),a.Sc(99),a.Zb(100,"button",36),a.hc("click",function(){return a.Hc(e),a.Ec(97).click()}),a.Zb(101,"mat-icon"),a.Sc(102,"attach_file"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(103,"mat-dialog-actions"),a.Zb(104,"button",37),a.hc("click",function(){return t.onClose()}),a.Sc(105,"Annuler"),a.Yb(),a.Zb(106,"button",38),a.hc("click",function(){return t.ajouterDossier()}),a.Sc(107," Valider "),a.Yb(),a.Yb()}2&e&&(a.Gb(3),a.uc("formGroup",t.dossierFormAddNew),a.Gb(17),a.uc("ngModel",t.date_sign),a.Gb(4),a.uc("ngModel",t.date_fin),a.Gb(4),a.uc("ngModel",t.duree),a.Gb(46),a.uc("ngModel",t.dateAlerte),a.Gb(7),a.uc("ngModel",t.searchText),a.Gb(1),a.uc("ngForOf",a.oc(83,10,t.userList,t.searchText)),a.Gb(9),a.uc("ngModel",t.searchText),a.Gb(3),a.uc("ngForOf",a.oc(95,13,t.clientList,t.searchText)),a.Gb(5),a.Uc(" ",t.piece||"Aucun fichier selectionne."," "))},directives:[p.f,f.e,u.y,u.r,u.k,g.c,g.g,u.d,Z.b,u.q,u.i,u.m,Y.a,S.o,u.w,v.c,v.b,v.a,x.n,C.b,D.a,p.c,p.d],pipes:[_.a],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),e})();var F=i("wZkO");const M=["UploadFileInput"];function k(e,t){if(1&e&&(a.Zb(0,"mat-option",43),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.nif),a.Gb(1),a.Vc("",e.nom," NIF: ",e.nif,"")}}function I(e,t){if(1&e&&(a.Zb(0,"mat-option",43),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.email),a.Gb(1),a.Tc(e.email)}}function E(e,t){if(1&e&&(a.Zb(0,"mat-option",43),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.nif),a.Gb(1),a.Vc("",e.nom," NIF: ",e.nif,"")}}function G(e,t){if(1&e&&(a.Zb(0,"mat-option",43),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.uc("value",e.email),a.Gb(1),a.Tc(e.email)}}let T=(()=>{class e{constructor(e,t,i,a,o,n,r,s){this.fb=e,this.dialogRefUpdate=t,this.userService=i,this.dossierService=a,this.dossier=o,this.clientService=n,this.http=r,this.notif=s,this.piece_jointe="Selectionner Fichier",this.dataLoading=!0}ngOnInit(){this.selectedValue=this.dossier.emails.split(","),this.dateAlerte=this.dossier.date_alerte,this.listClient(),this.listUsers(),this.dossierFormUpdate=this.fb.group({id:[this.dossier.id,u.x.required],nom_cocontractant:[this.dossier.nom_cocontractant,u.x.required],lieu_execution:[this.dossier.lieu_execution,u.x.required],montant:[this.dossier.montant,u.x.required],date_signature:[this.dossier.date_signature,u.x.required],duree:[this.dossier.duree,u.x.required],date_fin:[this.dossier.date_fin],type:[this.dossier.type,u.x.required],sous_typologie:[this.dossier.sous_typologie,u.x.required],reference:[this.dossier.reference,u.x.required],piece_jointe:[this.piece_jointe],date_alerte:[this.dateAlerte,u.x.required],emails:[this.selectedValue,u.x.required],client:[this.dossier.client,u.x.required],search:[u.x.required],intitule:[this.dossier.intitule,u.x.required],objetEmail:[this.dossier.objetEmail,u.x.required],dateNotification:[this.dossier.dateNotification,u.x.required],datePremierNotif:[this.dossier.datePremierNotif,u.x.required],dateSecondNotif:[this.dossier.dateSecondNotif,u.x.required],etatNotif:[this.dossier.etatNotif,u.x.required]}),this.loadDossiers()}onClose(){this.dossierFormUpdate.reset(),this.dialogRefUpdate.close()}modifierDossier(){var e=new FormData,t=new Date(this.dateAlerte);e.set("nom_cocontractant",this.dossierFormUpdate.get("nom_cocontractant").value),e.set("lieu_execution",this.dossierFormUpdate.get("lieu_execution").value),e.set("montant",this.dossierFormUpdate.get("montant").value),e.set("date_signature",this.dossierFormUpdate.get("date_signature").value),e.set("duree",this.dossierFormUpdate.get("duree").value),e.set("date_fin",this.dossierFormUpdate.get("date_fin").value),e.set("type",this.dossierFormUpdate.get("type").value),e.set("sous_typologie",this.dossierFormUpdate.get("sous_typologie").value),e.set("reference",this.dossierFormUpdate.get("reference").value),e.set("piece_jointe",this.file),e.set("date_alerte",this.dossierFormUpdate.get("date_alerte").value),e.set("emails",this.dossierFormUpdate.get("emails").value),e.set("client",this.dossierFormUpdate.get("client").value),e.set("intitule",this.dossierFormUpdate.get("intitule").value),e.set("objetEmail",this.dossierFormUpdate.get("objetEmail").value),e.set("dateNotification",this.dossierFormUpdate.get("dateNotification").value),e.set("datePremierNotif",new Date(t.setDate(t.getDate()-30)).toISOString().slice(0,10)),e.set("dateSecondNotif",new Date(t.setDate(t.getDate()-15)).toISOString().slice(0,10)),e.set("etatNotif",this.dossierFormUpdate.get("etatNotif").value),this.http.put("http://localhost:8197/api/dossier/dossier-upd/"+this.dossier.id,e).subscribe(e=>this.notif.showSuccess("Document modifie avec succes !!!"),e=>console.log(e)),this.onClose(),this.loadDossiers()}updateSansFichier(){var e=new FormData,t=new Date(this.dateAlerte);e.set("nom_cocontractant",this.dossierFormUpdate.get("nom_cocontractant").value),e.set("lieu_execution",this.dossierFormUpdate.get("lieu_execution").value),e.set("montant",this.dossierFormUpdate.get("montant").value),e.set("date_signature",this.dossierFormUpdate.get("date_signature").value),e.set("duree",this.dossierFormUpdate.get("duree").value),e.set("date_fin",this.dossierFormUpdate.get("date_fin").value),e.set("type",this.dossierFormUpdate.get("type").value),e.set("sous_typologie",this.dossierFormUpdate.get("sous_typologie").value),e.set("reference",this.dossierFormUpdate.get("reference").value),e.set("date_alerte",this.dossierFormUpdate.get("date_alerte").value),e.set("emails",this.dossierFormUpdate.get("emails").value),e.set("client",this.dossierFormUpdate.get("client").value),e.set("intitule",this.dossierFormUpdate.get("intitule").value),e.set("objetEmail",this.dossierFormUpdate.get("objetEmail").value),e.set("dateNotification",this.dossierFormUpdate.get("dateNotification").value),e.set("datePremierNotif",new Date(t.setDate(t.getDate()-30)).toISOString().slice(0,10)),e.set("dateSecondNotif",new Date(t.setDate(t.getDate()-15)).toISOString().slice(0,10)),e.set("etatNotif",this.dossierFormUpdate.get("etatNotif").value),this.http.put("http://localhost:8197/api/dossier/dossier-update/"+this.dossier.id,e).subscribe(e=>this.notif.showSuccess("Document modifie ave succes !!!"),e=>console.log(e)),this.onClose(),this.loadDossiers()}loadDossiers(){this.dossierService.listerDossier().subscribe(e=>this.handlerDossier(e),e=>this.handlerDossierError(e))}handlerDossier(e){console.log(e),this.dataLoading=!1,this.dataSourceDossier=new l.o(e),this.dataSourceDossier.paginator=this.paginator,this.dataSourceDossier.sort=this.sort}handlerDossierError(e){console.error(e)}listClient(){this.clientService.clientListe().subscribe(e=>{this.profilList=e})}listUsers(){this.userService.userListe().subscribe(e=>{this.userList=e})}onFileSelected(e){const t=e.target.files[0];t&&(this.piece_jointe=t.name),this.file=e.target.files[0],console.log(t.name)}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(u.f),a.Tb(p.h),a.Tb(c.a),a.Tb(r.a),a.Tb(p.a),a.Tb(s.a),a.Tb(h.c),a.Tb(m.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-update"]],viewQuery:function(e,t){if(1&e&&(a.Wc(M,1),a.Wc(d.a,3),a.Wc(b.a,3)),2&e){let e;a.Dc(e=a.ic())&&(t.uploadFileInput=e.first),a.Dc(e=a.ic())&&(t.paginator=e.first),a.Dc(e=a.ic())&&(t.sort=e.first)}},decls:203,vars:27,consts:[["dynamicHeight","","mat-align-tabs","center","animationDuration","1000ms"],["label","Modifier sans fichier"],[1,"per-form",3,"formGroup"],["appearance","fill",1,"width-75",2,"margin-left","5px","width","32%"],["formControlName","nom_cocontractant","matInput","","placeholder","Entrer le nom du contrat","maxlength","50","name","nom_cocontractant"],["formControlName","lieu_execution","matInput","","placeholder","Entrer le lieu d'execution du contrat","maxlength","50","name","lieu_execution"],["formControlName","montant","matInput","","placeholder","Entrer le montant du contrat","maxlength","50","name","montant"],["type","date","mask","","formControlName","date_signature","matInput","","placeholder","Entrer le data_signature","maxlength","50","name","date_signature"],["type","date","mask","","formControlName","date_fin","matInput","","placeholder","Entrer le date_fin_contrat","maxlength","50","name","date_fin"],["type","duree","mask","","formControlName","duree","matInput","","placeholder","Entrer le duree_contrat","maxlength","50","name","duree"],["appearance","fill",1,"no-label-field",2,"margin-left","5px","width","32%"],["formControlName","type","panelClass","my-select-panel-class"],["value","Achat"],["value","Bail"],["value","Prestation de service"],["formControlName","sous_typologie","panelClass","my-select-panel-class"],["value","Mobilier"],["value","Immobilier"],["value","Sites"],["value","Accueils commerciaux"],["value","R\xe8sidentiel"],["value","Ev\xe8nementiels/Sponsoring"],["value","Municipalite"],["value","Partenaires sous-traitants"],["formControlName","reference","matInput","","placeholder","Entrer reference_contrat","maxlength","50","name","reference"],["appearance","fill",1,"width-75",2,"margin-left","5px","width","49%"],["type","date","mask","","formControlName","date_alerte","matInput","","placeholder","Entrer le date_alerte","maxlength","50","name","date_alerte"],["appearance","fill",1,"no-label-field",2,"margin-left","5px","width","49%"],["formControlName","client","panelClass","my-select-panel-class"],["fxLayout","","fxLayoutAlign","center center"],["fxFlex","50%"],["type","search","formControlName","search","placeholder","Entrer le NIF du client","matInput","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","emails","multiple","","panelClass","my-select-panel-class","name","emails",3,"ngModel","ngModelChange"],["type","search","formControlName","search","placeholder","Rechercher","matInput","",3,"ngModel","ngModelChange"],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","color","primary",3,"click"],["label","Modifier avec fichier"],["type","date","mask","","formControlName","date_alerte","matInput","","placeholder","Entrer le date_alerte","maxlength","50","name","date_alerte",3,"ngModel","ngModelChange"],["type","file","formControlName","piece_jointe",1,"file-input",3,"required","change"],["fileUpload",""],[1,"file-upload"],["mat-mini-fab","","color","primary",1,"upload-btn",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=a.ac();a.Zb(0,"mat-dialog-content"),a.Zb(1,"mat-tab-group",0),a.Zb(2,"mat-tab",1),a.Zb(3,"h2"),a.Sc(4,"Modifier ce contrat"),a.Yb(),a.Zb(5,"form",2),a.Zb(6,"mat-form-field",3),a.Zb(7,"mat-label"),a.Sc(8,"Nom du Cocontractant"),a.Yb(),a.Ub(9,"input",4),a.Yb(),a.Zb(10,"mat-form-field",3),a.Zb(11,"mat-label"),a.Sc(12,"Lieux d'execution"),a.Yb(),a.Ub(13,"input",5),a.Yb(),a.Zb(14,"mat-form-field",3),a.Zb(15,"mat-label"),a.Sc(16,"Montant du contrat"),a.Yb(),a.Ub(17,"input",6),a.Yb(),a.Ub(18,"br"),a.Zb(19,"mat-form-field",3),a.Zb(20,"mat-label"),a.Sc(21,"Date de signature"),a.Yb(),a.Ub(22,"input",7),a.Yb(),a.Zb(23,"mat-form-field",3),a.Zb(24,"mat-label"),a.Sc(25,"Date de fin du contrat"),a.Yb(),a.Ub(26,"input",8),a.Yb(),a.Zb(27,"mat-form-field",3),a.Zb(28,"mat-label"),a.Sc(29,"Duree du contrat"),a.Yb(),a.Ub(30,"input",9),a.Yb(),a.Ub(31,"br"),a.Zb(32,"mat-form-field",10),a.Zb(33,"mat-label"),a.Sc(34,"Type de contrat"),a.Yb(),a.Zb(35,"mat-select",11),a.Zb(36,"mat-option",12),a.Sc(37,"Achat"),a.Yb(),a.Zb(38,"mat-option",13),a.Sc(39,"Bail"),a.Yb(),a.Zb(40,"mat-option",14),a.Sc(41,"Prestation de Service"),a.Yb(),a.Yb(),a.Yb(),a.Zb(42,"mat-form-field",10),a.Zb(43,"mat-label"),a.Sc(44,"Selectionner le sous type de contrat"),a.Yb(),a.Zb(45,"mat-select",15),a.Zb(46,"mat-option",16),a.Sc(47,"Mobilier"),a.Yb(),a.Zb(48,"mat-option",17),a.Sc(49,"Immobilier"),a.Yb(),a.Zb(50,"mat-option",18),a.Sc(51,"Sites"),a.Yb(),a.Zb(52,"mat-option",19),a.Sc(53,"Accueils commerciaux"),a.Yb(),a.Zb(54,"mat-option",20),a.Sc(55,"R\xe8sidentiel"),a.Yb(),a.Zb(56,"mat-option",21),a.Sc(57,"Ev\xe8nementiels/Sponsoring"),a.Yb(),a.Zb(58,"mat-option",22),a.Sc(59,"Municipalite"),a.Yb(),a.Zb(60,"mat-option",23),a.Sc(61,"Partenaires sous-traitants"),a.Yb(),a.Zb(62,"mat-option",18),a.Sc(63,"Presse"),a.Yb(),a.Yb(),a.Yb(),a.Zb(64,"mat-form-field",3),a.Zb(65,"mat-label"),a.Sc(66,"Reference du contrat"),a.Yb(),a.Ub(67,"input",24),a.Yb(),a.Ub(68,"br"),a.Zb(69,"mat-form-field",25),a.Zb(70,"mat-label"),a.Sc(71,"Date d'alerte"),a.Yb(),a.Ub(72,"input",26),a.Yb(),a.Zb(73,"mat-form-field",27),a.Zb(74,"mat-label"),a.Sc(75,"Client"),a.Yb(),a.Zb(76,"mat-select",28),a.Zb(77,"div",29),a.Zb(78,"mat-form-field",30),a.Zb(79,"input",31),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Qc(80,k,2,3,"mat-option",32),a.mc(81,"searchFilter"),a.Yb(),a.Yb(),a.Ub(82,"br"),a.Zb(83,"mat-form-field",27),a.Zb(84,"mat-label"),a.Sc(85,"Selectionner les Emails a notifier"),a.Yb(),a.Zb(86,"mat-select",33),a.hc("ngModelChange",function(e){return t.selectedValue=e}),a.Zb(87,"div",29),a.Zb(88,"mat-form-field",30),a.Zb(89,"input",34),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Qc(90,I,2,2,"mat-option",32),a.mc(91,"searchFilter"),a.Yb(),a.Yb(),a.Yb(),a.Zb(92,"mat-dialog-actions"),a.Zb(93,"button",35),a.hc("click",function(){return t.onClose()}),a.Sc(94,"Annuler"),a.Yb(),a.Zb(95,"button",36),a.hc("click",function(){return t.updateSansFichier()}),a.Zb(96,"mat-icon"),a.Sc(97,"how_to_reg"),a.Yb(),a.Sc(98,"Update "),a.Yb(),a.Yb(),a.Yb(),a.Zb(99,"mat-tab",37),a.Zb(100,"h2"),a.Sc(101,"Modifier ce contrat"),a.Yb(),a.Zb(102,"form",2),a.Zb(103,"mat-form-field",3),a.Zb(104,"mat-label"),a.Sc(105,"Nom du Cocontractant"),a.Yb(),a.Ub(106,"input",4),a.Yb(),a.Zb(107,"mat-form-field",3),a.Zb(108,"mat-label"),a.Sc(109,"Lieux d'execution"),a.Yb(),a.Ub(110,"input",5),a.Yb(),a.Zb(111,"mat-form-field",3),a.Zb(112,"mat-label"),a.Sc(113,"Montant du contrat"),a.Yb(),a.Ub(114,"input",6),a.Yb(),a.Ub(115,"br"),a.Zb(116,"mat-form-field",3),a.Zb(117,"mat-label"),a.Sc(118,"Date de signature"),a.Yb(),a.Ub(119,"input",7),a.Yb(),a.Zb(120,"mat-form-field",3),a.Zb(121,"mat-label"),a.Sc(122,"Date de fin du contrat"),a.Yb(),a.Ub(123,"input",8),a.Yb(),a.Zb(124,"mat-form-field",3),a.Zb(125,"mat-label"),a.Sc(126,"Duree du contrat"),a.Yb(),a.Ub(127,"input",9),a.Yb(),a.Ub(128,"br"),a.Zb(129,"mat-form-field",10),a.Zb(130,"mat-label"),a.Sc(131,"Type de contrat"),a.Yb(),a.Zb(132,"mat-select",11),a.Zb(133,"mat-option",12),a.Sc(134,"Achat"),a.Yb(),a.Zb(135,"mat-option",13),a.Sc(136,"Bail"),a.Yb(),a.Zb(137,"mat-option",14),a.Sc(138,"Prestation de Service"),a.Yb(),a.Yb(),a.Yb(),a.Zb(139,"mat-form-field",10),a.Zb(140,"mat-label"),a.Sc(141,"Selectionner le sous type de contrat"),a.Yb(),a.Zb(142,"mat-select",15),a.Zb(143,"mat-option",16),a.Sc(144,"Mobilier"),a.Yb(),a.Zb(145,"mat-option",17),a.Sc(146,"Immobilier"),a.Yb(),a.Zb(147,"mat-option",18),a.Sc(148,"Sites"),a.Yb(),a.Zb(149,"mat-option",19),a.Sc(150,"Accueils commerciaux"),a.Yb(),a.Zb(151,"mat-option",20),a.Sc(152,"R\xe8sidentiel"),a.Yb(),a.Zb(153,"mat-option",21),a.Sc(154,"Ev\xe8nementiels/Sponsoring"),a.Yb(),a.Zb(155,"mat-option",22),a.Sc(156,"Municipalite"),a.Yb(),a.Zb(157,"mat-option",23),a.Sc(158,"Partenaires sous-traitants"),a.Yb(),a.Zb(159,"mat-option",18),a.Sc(160,"Presse"),a.Yb(),a.Yb(),a.Yb(),a.Zb(161,"mat-form-field",3),a.Zb(162,"mat-label"),a.Sc(163,"Reference du contrat"),a.Yb(),a.Ub(164,"input",24),a.Yb(),a.Ub(165,"br"),a.Zb(166,"mat-form-field",25),a.Zb(167,"mat-label"),a.Sc(168,"Date d'alerte"),a.Yb(),a.Zb(169,"input",38),a.hc("ngModelChange",function(e){return t.dateAlerte=e}),a.Yb(),a.Yb(),a.Zb(170,"mat-form-field",27),a.Zb(171,"mat-label"),a.Sc(172,"Client"),a.Yb(),a.Zb(173,"mat-select",28),a.Zb(174,"div",29),a.Zb(175,"mat-form-field",30),a.Zb(176,"input",31),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Qc(177,E,2,3,"mat-option",32),a.mc(178,"searchFilter"),a.Yb(),a.Yb(),a.Ub(179,"br"),a.Zb(180,"mat-form-field",27),a.Zb(181,"mat-label"),a.Sc(182,"Selectionner les Emails a notifier"),a.Yb(),a.Zb(183,"mat-select",33),a.hc("ngModelChange",function(e){return t.selectedValue=e}),a.Zb(184,"div",29),a.Zb(185,"mat-form-field",30),a.Zb(186,"input",34),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Yb(),a.Qc(187,G,2,2,"mat-option",32),a.mc(188,"searchFilter"),a.Yb(),a.Yb(),a.Zb(189,"input",39,40),a.hc("change",function(e){return t.onFileSelected(e)}),a.Yb(),a.Zb(191,"div",41),a.Sc(192),a.Zb(193,"button",42),a.hc("click",function(){return a.Hc(e),a.Ec(190).click()}),a.Zb(194,"mat-icon"),a.Sc(195,"attach_file"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(196,"mat-dialog-actions"),a.Zb(197,"button",35),a.hc("click",function(){return t.onClose()}),a.Sc(198,"Annuler"),a.Yb(),a.Zb(199,"button",36),a.hc("click",function(){return t.modifierDossier()}),a.Zb(200,"mat-icon"),a.Sc(201,"how_to_reg"),a.Yb(),a.Sc(202,"Update "),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()}2&e&&(a.Gb(5),a.uc("formGroup",t.dossierFormUpdate),a.Gb(74),a.uc("ngModel",t.searchText),a.Gb(1),a.uc("ngForOf",a.oc(81,15,t.profilList,t.searchText)),a.Gb(6),a.uc("ngModel",t.selectedValue),a.Gb(3),a.uc("ngModel",t.searchText),a.Gb(1),a.uc("ngForOf",a.oc(91,18,t.userList,t.searchText)),a.Gb(12),a.uc("formGroup",t.dossierFormUpdate),a.Gb(67),a.uc("ngModel",t.dateAlerte),a.Gb(7),a.uc("ngModel",t.searchText),a.Gb(1),a.uc("ngForOf",a.oc(178,21,t.profilList,t.searchText)),a.Gb(6),a.uc("ngModel",t.selectedValue),a.Gb(3),a.uc("ngModel",t.searchText),a.Gb(1),a.uc("ngForOf",a.oc(188,24,t.userList,t.searchText)),a.Gb(2),a.uc("required",!1),a.Gb(3),a.Uc(" ",t.piece_jointe||"Aucun fichier selectionne."," "))},directives:[p.f,F.b,F.a,u.y,u.r,u.k,g.c,g.g,u.d,Z.b,u.q,u.i,u.m,Y.a,S.o,v.c,v.b,v.a,x.n,p.c,C.b,p.d,D.a,u.w],pipes:[_.a],styles:[".file-input[_ngcontent-%COMP%]{display:none}"]}),e})();var A=i("O7m7");const L=["UploadFileInput"];let q=(()=>{class e{constructor(e,t,i,a,o,n){this.fb=e,this.notifService=t,this.dialogRefUpdate=i,this.dossierService=a,this.dossier=o,this.clientService=n}ngOnInit(){this.listClient(),this.dossierFormDetail=this.fb.group({id:[this.dossier.id,u.x.required],nom_cocontractant:[this.dossier.nom_cocontractant,u.x.required],lieu_execution:[this.dossier.lieu_execution,u.x.required],montant:[this.dossier.montant,u.x.required],date_signature:[this.dossier.date_signature,u.x.required],duree:[this.dossier.duree,u.x.required],date_fin:[this.dossier.date_fin],type:[this.dossier.type,u.x.required],sous_typologie:[this.dossier.sous_typologie,u.x.required],reference:[this.dossier.reference,u.x.required],piece_jointe:[this.dossier.piece_jointe,u.x.required],date_alerte:[this.dossier.date_alerte,u.x.required],emails:[this.dossier.emails,u.x.required],client:[this.dossier.client,u.x.required],intitule:[this.dossier.intitule,u.x.required],objetEmail:[this.dossier.objetEmail,u.x.required],dateNotification:[this.dossier.dateNotification,u.x.required],datePremierNotif:[this.dossier.datePremierNotif,u.x.required],dateSecondNotif:[this.dossier.dateSecondNotif,u.x.required],etatNotif:[this.dossier.etatNotif,u.x.required]})}listClient(){this.clientService.clientListe().subscribe(e=>{this.profilList=e})}onClose(){}downloadFile(){window.open(this.dossier.piece_jointe)}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(u.f),a.Tb(A.a),a.Tb(p.h),a.Tb(r.a),a.Tb(p.a),a.Tb(s.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-detail-dossier"]],viewQuery:function(e,t){if(1&e&&a.Wc(L,1),2&e){let e;a.Dc(e=a.ic())&&(t.uploadFileInput=e.first)}},decls:77,vars:1,consts:[[1,"per-form",3,"formGroup"],["appearance","fill",1,"width-75",2,"margin-left","5px","width","32%"],["formControlName","nom_cocontractant","matInput","","placeholder","Entrer le nom du contrat","maxlength","50","name","nom_cocontractant","aria-disabled","true","readonly",""],["formControlName","lieu_execution","matInput","","placeholder","Entrer le lieu d'execution du contrat","maxlength","50","name","lieu_execution","readonly",""],["formControlName","montant","matInput","","placeholder","Entrer le montant du contrat","maxlength","50","name","montant","readonly",""],["type","date","mask","","formControlName","date_signature","matInput","","placeholder","Entrer le data_signature","maxlength","50","name","date_signature","readonly",""],["type","duree","mask","","formControlName","duree","matInput","","placeholder","Entrer le duree_contrat","maxlength","50","name","duree","readonly",""],["type","date","mask","","formControlName","date_fin","matInput","","placeholder","Entrer le date_fin_contrat","maxlength","50","name","date_fin","readonly",""],["appearance","fill",1,"no-label-field",2,"margin-left","5px","width","32%"],["type","text","mask","","formControlName","type","matInput","","maxlength","50","name","type","readonly",""],["formControlName","sous_typologie","matInput","","maxlength","50","name","sous_typologie","readonly",""],["formControlName","reference","matInput","","placeholder","Entrer reference_contrat","maxlength","50","name","reference","readonly",""],["type","date","formControlName","dateNotification","matInput","","maxlength","50","name","dateNotification","readonly",""],["type","text","mask","","formControlName","date_alerte","matInput","","placeholder","Entrer le date_alerte","maxlength","50","name","date_alerte","readonly",""],["type","text","mask","","formControlName","client","matInput","","maxlength","50","name","client","readonly",""],["appearance","fill",1,"width-75",2,"margin-left","5px","width","99%"],["type","text","mask","","formControlName","emails","matInput","","placeholder","Entrer le emails_alerter","maxlength","50","name","emails","readonly",""],["appearance","fill",1,"width-75",2,"margin-left","5px","width","49%"],["type","date","formControlName","datePremierNotif","matInput","","maxlength","50","name","dateNotification","readonly",""],["type","date","formControlName","dateSecondNotif","matInput","","maxlength","50","name","dateSecondNotif","readonly",""],["mat-icon-button","",3,"click"],[1,"material-icons"],["mat-button","","mat-dialog-close","",3,"click"]],template:function(e,t){1&e&&(a.Zb(0,"mat-dialog-content"),a.Zb(1,"mat-card-title"),a.Sc(2,"D\xe9tails du Dossier"),a.Yb(),a.Zb(3,"form",0),a.Zb(4,"mat-form-field",1),a.Zb(5,"mat-label"),a.Sc(6,"Nom du Cocontractant"),a.Yb(),a.Ub(7,"input",2),a.Yb(),a.Zb(8,"mat-form-field",1),a.Zb(9,"mat-label"),a.Sc(10,"Lieux d'execution"),a.Yb(),a.Ub(11,"input",3),a.Yb(),a.Zb(12,"mat-form-field",1),a.Zb(13,"mat-label"),a.Sc(14,"Montant du contrat"),a.Yb(),a.Ub(15,"input",4),a.Yb(),a.Ub(16,"br"),a.Zb(17,"mat-form-field",1),a.Zb(18,"mat-label"),a.Sc(19,"Date de signature"),a.Yb(),a.Ub(20,"input",5),a.Yb(),a.Zb(21,"mat-form-field",1),a.Zb(22,"mat-label"),a.Sc(23,"Duree du contrat"),a.Yb(),a.Ub(24,"input",6),a.Yb(),a.Zb(25,"mat-form-field",1),a.Zb(26,"mat-label"),a.Sc(27,"Date de fin du contrat"),a.Yb(),a.Ub(28,"input",7),a.Yb(),a.Ub(29,"br"),a.Zb(30,"mat-form-field",8),a.Zb(31,"mat-label"),a.Sc(32,"Type de contrat"),a.Yb(),a.Ub(33,"input",9),a.Yb(),a.Zb(34,"mat-form-field",8),a.Zb(35,"mat-label"),a.Sc(36,"Sous type de contrat"),a.Yb(),a.Ub(37,"input",10),a.Yb(),a.Zb(38,"mat-form-field",1),a.Zb(39,"mat-label"),a.Sc(40,"Reference du contrat"),a.Yb(),a.Ub(41,"input",11),a.Yb(),a.Ub(42,"br"),a.Zb(43,"mat-form-field",1),a.Zb(44,"mat-label"),a.Sc(45,"Date de reception"),a.Yb(),a.Ub(46,"input",12),a.Yb(),a.Zb(47,"mat-form-field",1),a.Zb(48,"mat-label"),a.Sc(49,"Date d'alerte"),a.Yb(),a.Ub(50,"input",13),a.Yb(),a.Zb(51,"mat-form-field",8),a.Zb(52,"mat-label"),a.Sc(53,"Client"),a.Yb(),a.Ub(54,"input",14),a.Yb(),a.Ub(55,"br"),a.Zb(56,"mat-form-field",15),a.Zb(57,"mat-label"),a.Sc(58,"Emails a notifier"),a.Yb(),a.Ub(59,"textarea",16),a.Yb(),a.Ub(60,"br"),a.Zb(61,"mat-form-field",17),a.Zb(62,"mat-label"),a.Sc(63,"Date Premier Notification"),a.Yb(),a.Ub(64,"input",18),a.Yb(),a.Zb(65,"mat-form-field",17),a.Zb(66,"mat-label"),a.Sc(67,"Date Seconde Notification"),a.Yb(),a.Ub(68,"input",19),a.Yb(),a.Ub(69,"br"),a.Zb(70,"button",20),a.hc("click",function(){return t.downloadFile()}),a.Zb(71,"span",21),a.Sc(72,"file_download"),a.Yb(),a.Sc(73,"Telecharger piece jointe"),a.Yb(),a.Yb(),a.Zb(74,"mat-dialog-actions"),a.Zb(75,"button",22),a.hc("click",function(){return t.onClose()}),a.Sc(76,"Fermer"),a.Yb(),a.Yb(),a.Yb()),2&e&&(a.Gb(3),a.uc("formGroup",t.dossierFormDetail))},directives:[p.f,f.e,u.y,u.r,u.k,g.c,g.g,u.d,Z.b,u.q,u.i,u.m,C.b,p.c,p.d],styles:[""]}),e})();var j=i("EUZL"),P=i("ibTr"),Q=i("M0ag"),R=i("AytR"),z=i("tgey");const O=["UploadFileInput"];function W(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",29),a.hc("click",function(){return a.Hc(e),a.lc().createNewDossier()}),a.Sc(1,"Ajouter nouveau contrat"),a.Yb()}}function X(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",30),a.hc("click",function(){return a.Hc(e),a.lc().exportAsXLSX()}),a.kc(),a.Zb(1,"svg",31),a.Zb(2,"g",32),a.Ub(3,"path",33),a.Zb(4,"g"),a.Ub(5,"path",34),a.Ub(6,"path",35),a.Ub(7,"path",36),a.Ub(8,"path",37),a.Ub(9,"path",38),a.Ub(10,"path",39),a.Yb(),a.Yb(),a.Yb(),a.Yb()}}function $(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Cocontractant "),a.Yb())}function H(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.nom_cocontractant," ")}}function V(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Lieu du execution"),a.Yb())}function B(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.lieu_execution," ")}}function J(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1,"Montant"),a.Yb())}function K(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.montant," ")}}function ee(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Type de Contrat "),a.Yb())}function te(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.type," ")}}function ie(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Sous Type "),a.Yb())}function ae(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.sous_typologie," ")}}function oe(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Reference "),a.Yb())}function ne(e,t){if(1&e&&(a.Zb(0,"td",41),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.reference," ")}}function re(e,t){1&e&&(a.Zb(0,"th",40),a.Sc(1," Client "),a.Yb())}function se(e,t){if(1&e&&(a.Zb(0,"td",42),a.Sc(1),a.Yb()),2&e){const e=t.$implicit;a.Gb(1),a.Uc(" ",e.client," ")}}function le(e,t){1&e&&(a.Zb(0,"th",43),a.Sc(1,"Action"),a.Yb())}function ce(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",47),a.hc("click",function(){a.Hc(e);const t=a.lc().$implicit;return a.lc().updateHoldDossier(t)}),a.Zb(1,"mat-icon"),a.Sc(2,"create"),a.Yb(),a.Yb()}}function de(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",47),a.hc("click",function(){a.Hc(e);const t=a.lc().$implicit;return a.lc().deleteDossier(t)}),a.Zb(1,"mat-icon"),a.Sc(2,"delete"),a.Yb(),a.Yb()}}function be(e,t){if(1&e){const e=a.ac();a.Zb(0,"button",48),a.hc("click",function(){a.Hc(e);const t=a.lc().$implicit;return a.lc().detailDossier(t)}),a.kc(),a.Zb(1,"svg",49),a.Zb(2,"g",50),a.Zb(3,"g",32),a.Ub(4,"path",51),a.Ub(5,"path",52),a.Zb(6,"g",53),a.Ub(7,"path",54),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb()}}function me(e,t){if(1&e&&(a.Zb(0,"th",44),a.Qc(1,ce,3,0,"button",45),a.Qc(2,de,3,0,"button",45),a.Qc(3,be,8,0,"button",46),a.Yb()),2&e){const e=a.lc();a.Gb(1),a.uc("ngIf",e.isCanUpdate),a.Gb(1),a.uc("ngIf",e.isCanDelete),a.Gb(1),a.uc("ngIf",e.isCanDetail)}}function ue(e,t){1&e&&a.Ub(0,"tr",55)}function pe(e,t){1&e&&a.Ub(0,"tr",56)}const he=function(){return[10,20,35,100]},fe=[{path:"nouveau",component:o},{path:"lister",component:(()=>{class e{constructor(e,t,i,a){this.dossierService=e,this.dialog=t,this.excelService=i,this.storage=a,this.displayedColumns=["nom_cocontractant","lieu_execution","montant","type","sous_typologie","reference","client","action"],this.dataLoading=!0,this.piece="Select File",this.title="angular-app",this.fileName="ListDossier.xlsx",this.isCanDelete=!1,this.isCanUpdate=!1,this.isCanExport=!1,this.isCanDetail=!1,this.isCanCreate=!1,this.key=R.a.key,this.doFilter=e=>{this.dataSource.filter=e.trim().toLocaleLowerCase(),console.log("this.dataSource.data :::::::::",this.dataSource.data),console.log("this.dataSource.filteredData :::::::::",this.dataSource.filteredData),this.dataDossiers=this.dataSource.filteredData}}ngOnInit(){this.userProfil=this.storage.get(this.key).profile,this.checkProfi(this.userProfil),this.loadDossier()}ngAfterViewInit(){this.loadDossier()}exportAsXLSX(){console.log("Data :",this.dataDossiers),this.excelService.exportAsExcel(this.dataDossiers,"dossier_data")}newDossier(){this.dossierService.inicializerFormGroup();const e=new p.e;e.disableClose=!1,e.autoFocus=!0,e.width="650px",this.dialog.open(w,e).afterClosed().subscribe(e=>{this.loadDossier()})}loadDossier(){this.dossierService.listerDossier().subscribe(e=>this.handlerDossier(e),e=>this.handleDossierError(e))}handlerDossier(e){console.log(e),this.dataLoading=!1,this.dataSource=new l.o(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}handleDossierError(e){console.log("Probl\xe8me de chargement de campagne CBM!","Avertissement")}createNewDossier(){this.dossierService.inicializerFormGroup();const e=new p.e;e.disableClose=!1,e.autoFocus=!0,e.width="750px",this.dialog.open(w,e).afterClosed().subscribe(e=>{this.loadDossier()})}updateHoldDossier(e){console.log(e),console.log(e.emails),this.dossierService.inicializerFormGroup(),this.dialog.open(T,{width:"750%",data:e,disableClose:!1,autoFocus:!0}).afterClosed().subscribe(e=>{this.loadDossier()})}detailDossier(e){this.dossierService.inicializerFormGroup(),this.dialog.open(q,{width:"800px",data:e,disableClose:!0,autoFocus:!1}).afterClosed().subscribe(e=>{this.loadDossier()})}deleteDossier(e){confirm("Vous etes sur de vouloir supprimer ce dossier ?")&&(this.dossierService.deleteDossier(e).subscribe(e=>{console.log(e),this.loadDossier()},e=>{console.log(e)}),console.log("Dossier supprime!"))}fileChangeEvent(e){this.piece=e.target.files[0],this.uploadFileInput.nativeElement.value=""}exportExcel(){let e=document.getElementById("excel-table");const t=j.utils.table_to_sheet(e),i=j.utils.book_new();j.utils.book_append_sheet(i,t,"Sheet1"),j.writeFile(i,this.fileName)}checkProfi(e){switch(console.log("Profil::::::",e),e){case"Juridique":this.isCanDelete=!1,this.isCanExport=!0,this.isCanDetail=!0,this.isCanCreate=!0,this.isCanUpdate=!0;break;case"Comptable":this.isCanDelete=!1,this.isCanExport=!0,this.isCanDetail=!0,this.isCanCreate=!0,this.isCanUpdate=!1;break;case"Support SI":this.isCanDelete=!1,this.isCanExport=!0,this.isCanDetail=!0,this.isCanCreate=!1,this.isCanUpdate=!1;break;case"Admin":this.isCanDelete=!0,this.isCanUpdate=!0,this.isCanExport=!0,this.isCanDetail=!0,this.isCanCreate=!0;break;default:console.log("Une erreur s'est produite !")}}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(r.a),a.Tb(p.b),a.Tb(P.a),a.Tb(Q.a))},e.\u0275cmp=a.Nb({type:e,selectors:[["app-lister"]],viewQuery:function(e,t){if(1&e&&(a.Wc(d.a,3),a.Wc(b.a,3),a.Wc(O,1)),2&e){let e;a.Dc(e=a.ic())&&(t.paginator=e.first),a.Dc(e=a.ic())&&(t.sort=e.first),a.Dc(e=a.ic())&&(t.uploadFileInput=e.first)}},decls:45,vars:8,consts:[[1,"route-content"],[1,"dshcard",2,"background-color","rgb(250, 143, 82)"],[1,"srn-dhb"],[2,"margin-bottom","5px"],["mat-raised-button","",3,"click",4,"ngIf"],["fxLayout","","fxLayoutAlign","center center"],["fxFlex","50%"],["matInput","","type","text","placeholder","Rechercher",3,"keyup"],["fxLayoutAlign","end start"],["mat-icon-button","","id","btnXlsRpt",3,"click",4,"ngIf"],["mat-table","","multiTemplateDataRows","","matSort","","id","excel-table",1,"mat-elevation-z8",3,"dataSource"],[1,"form-group"],["type","text","placeholder","Search","id","listSearch",1,"form-control","mb-4",3,"ngModel","ngModelChange"],["matColumnDef","nom_cocontractant"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","width: 20%;",4,"matCellDef"],["matColumnDef","lieu_execution"],["matColumnDef","montant"],["matColumnDef","type"],["matColumnDef","sous_typologie"],["matColumnDef","reference"],["matColumnDef","client"],["mat-cell","","style","width: 15%;",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","action-link","style","width: 5%;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"space",3,"pageSizeOptions"],["mat-raised-button","",3,"click"],["mat-icon-button","","id","btnXlsRpt",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","28","height","30","viewBox","0 0 172 172",2,"fill","#000000"],["fill","none","fill-rule","nonzero","stroke","none","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","10","stroke-dasharray","","stroke-dashoffset","0","font-family","none","font-weight","none","font-size","none","text-anchor","none",2,"mix-blend-mode","normal"],["d","M0,172v-172h172v172z","fill","#ffffff"],["d","M143.33333,161.25h-114.66667v-150.5h78.83333l35.83333,35.83333z","fill","#0c7238"],["d","M137.95833,50.16667h-34.04167v-34.04167z","fill","#dcedc8"],["d","M143.33333,161.25v-57.33333h-17.91667v25.08333h-17.91667v9.675l18.06,22.575z","fill","#43a047"],["d","M172,136.16667h-57.33333l28.66667,35.83333z","fill","#455a64"],["d","M132.58333,111.08333h21.5v43h-21.5z","fill","#455a64"],["d","M61.95942,60.91667h13.68117l11.10117,21.5215l11.72825,-21.5215h12.77817l-17.6085,28.66667l18.00983,28.66667h-13.4805l-12.09733,-22.532l-12.04358,22.532h-13.68117l18.30725,-28.77058z","fill","#ffffff"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"width","20%"],["mat-cell","",2,"width","15%"],["mat-header-cell",""],["mat-cell","",1,"action-link",2,"width","5%"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24","height","24","viewBox","0 0 172 172",2,"fill","#000000"],["transform",""],["d","M0,172v-172h172v172z","fill","none"],["d","M86,157.38c-39.42209,0 -71.38,-31.95791 -71.38,-71.38v0c0,-39.42209 31.95791,-71.38 71.38,-71.38h0c39.42209,0 71.38,31.95791 71.38,71.38v0c0,39.42209 -31.95791,71.38 -71.38,71.38z"],["fill","#000000"],["d","M43.41521,42.11374c-3.52018,0 -6.45386,2.93368 -6.45386,6.45386v12.90772c0,3.52018 2.93368,6.45386 6.45386,6.45386h12.90772c3.52018,0 6.45386,-2.93368 6.45386,-6.45386v-12.90772c0,-3.52018 -2.93368,-6.45386 -6.45386,-6.45386zM44.70598,49.85837h10.32618v10.32618h-10.32618zM74.39375,52.43992c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018zM110.53538,52.43992c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018zM43.41521,73.09228c-3.52018,0 -6.45386,2.93368 -6.45386,6.45386v12.90772c0,3.52018 2.93368,6.45386 6.45386,6.45386h12.90772c3.52018,0 6.45386,-2.93368 6.45386,-6.45386v-12.90772c0,-3.52018 -2.93368,-6.45386 -6.45386,-6.45386zM44.70598,80.83691h10.32618v10.32618h-10.32618zM74.39375,83.41846c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018zM110.53538,83.41846c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018zM43.41521,104.07081c-3.52018,0 -6.45386,2.93368 -6.45386,6.45386v12.90772c0,3.52018 2.93368,6.45386 6.45386,6.45386h12.90772c3.52018,0 6.45386,-2.93368 6.45386,-6.45386v-12.90772c0,-3.52018 -2.93368,-6.45386 -6.45386,-6.45386zM44.70598,111.81545h10.32618v10.32618h-10.32618zM74.39375,114.39699c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018zM110.53538,114.39699c-1.3965,-0.01975 -2.69545,0.71396 -3.39946,1.92018c-0.70401,1.20622 -0.70401,2.69806 0,3.90428c0.70401,1.20622 2.00296,1.93993 3.39946,1.92018h20.65236c1.3965,0.01975 2.69545,-0.71396 3.39946,-1.92018c0.70401,-1.20622 0.70401,-2.69806 0,-3.90428c-0.70401,-1.20622 -2.00296,-1.93993 -3.39946,-1.92018z"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(a.Ub(0,"page-header"),a.Zb(1,"div",0),a.Zb(2,"mat-card",1),a.Zb(3,"div",2),a.Sc(4," DOSSIERS"),a.Yb(),a.Yb(),a.Zb(5,"div",3),a.Qc(6,W,2,0,"button",4),a.Yb(),a.Zb(7,"div"),a.Zb(8,"div",5),a.Zb(9,"mat-form-field",6),a.Zb(10,"input",7),a.hc("keyup",function(e){return t.doFilter(e.target.value)}),a.Yb(),a.Yb(),a.Yb(),a.Zb(11,"div",8),a.Qc(12,X,11,0,"button",9),a.Yb(),a.Zb(13,"table",10),a.Zb(14,"div",11),a.Zb(15,"input",12),a.hc("ngModelChange",function(e){return t.searchText=e}),a.Yb(),a.Yb(),a.Xb(16,13),a.Qc(17,$,2,0,"th",14),a.Qc(18,H,2,1,"td",15),a.Wb(),a.Xb(19,16),a.Qc(20,V,2,0,"th",14),a.Qc(21,B,2,1,"td",15),a.Wb(),a.Xb(22,17),a.Qc(23,J,2,0,"th",14),a.Qc(24,K,2,1,"td",15),a.Wb(),a.Xb(25,18),a.Qc(26,ee,2,0,"th",14),a.Qc(27,te,2,1,"td",15),a.Wb(),a.Xb(28,19),a.Qc(29,ie,2,0,"th",14),a.Qc(30,ae,2,1,"td",15),a.Wb(),a.Xb(31,20),a.Qc(32,oe,2,0,"th",14),a.Qc(33,ne,2,1,"td",15),a.Wb(),a.Xb(34,21),a.Qc(35,re,2,0,"th",14),a.Qc(36,se,2,1,"td",22),a.Wb(),a.Xb(37,23),a.Zb(38,"tr"),a.Qc(39,le,2,0,"th",24),a.Yb(),a.Zb(40,"tr"),a.Qc(41,me,4,3,"th",25),a.Yb(),a.Wb(),a.Qc(42,ue,1,0,"tr",26),a.Qc(43,pe,1,0,"tr",27),a.Yb(),a.Ub(44,"mat-paginator",28),a.Yb(),a.Yb()),2&e&&(a.Gb(6),a.uc("ngIf",t.isCanCreate),a.Gb(6),a.uc("ngIf",t.isCanExport),a.Gb(1),a.uc("dataSource",t.dataSource),a.Gb(2),a.uc("ngModel",t.searchText),a.Gb(27),a.uc("matHeaderRowDef",t.displayedColumns),a.Gb(1),a.uc("matRowDefColumns",t.displayedColumns),a.Gb(1),a.uc("pageSizeOptions",a.wc(7,he)))},directives:[z.a,f.a,x.o,v.c,v.b,g.c,v.a,Z.b,l.n,b.a,u.d,u.q,u.t,l.c,l.i,l.b,l.k,l.m,d.a,C.b,l.h,b.b,l.a,D.a,l.j,l.l],styles:[""]}),e})()}];let ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({imports:[[n.i.forChild(fe)],n.i]}),e})();var Ze=i("YUcS");let Ye=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Rb({type:e}),e.\u0275inj=a.Qb({imports:[[Q.b,ge,Ze.a]]}),e})()}}]);